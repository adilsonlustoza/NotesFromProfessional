{"ast":null,"code":"import { AdDirective } from './ad.directive';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./service/ad.service\";\nimport * as i2 from \"./ad.directive\";\nfunction Chapter19Component_ng_template_4_Template(rf, ctx) {}\nexport class Chapter19Component {\n  constructor(service) {\n    this.service = service;\n    this.ads = [];\n    this.currentAdIndex = -1;\n    this.ads = this.service.getAds();\n  }\n  ngOnInit() {\n    this.loadComponent();\n    this.getAds();\n  }\n  loadComponent() {\n    // this.currentAdIndex= this.currentAdIndex==0?1:0;\n    this.currentAdIndex = (this.currentAdIndex + 1) % this.ads.length;\n    const adItem = this.ads[this.currentAdIndex];\n    const viewContainerRef = this.adHost.viewContainerRef;\n    viewContainerRef.clear();\n    const componentRef = viewContainerRef.createComponent(adItem.component);\n    componentRef.instance.data = adItem.data;\n    console.log(this.currentAdIndex + '  ' + adItem.component.toString());\n  }\n  getAds() {\n    const interval = setInterval(() => {\n      this.loadComponent();\n    }, 1000);\n    this.clearTimer = () => clearInterval(interval);\n  }\n  ngOnDestroy() {\n    this.clearTimer?.();\n  }\n}\nChapter19Component.ɵfac = function Chapter19Component_Factory(t) {\n  return new (t || Chapter19Component)(i0.ɵɵdirectiveInject(i1.AdService));\n};\nChapter19Component.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: Chapter19Component,\n  selectors: [[\"app-chapter19\"]],\n  viewQuery: function Chapter19Component_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(AdDirective, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.adHost = _t.first);\n    }\n  },\n  decls: 6,\n  vars: 0,\n  consts: [[1, \"ad-banner-example\"], [\"adHost\", \"\"]],\n  template: function Chapter19Component_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\");\n      i0.ɵɵtext(2, \"Capitulo 19\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(3, \"hr\");\n      i0.ɵɵtemplate(4, Chapter19Component_ng_template_4_Template, 0, 0, \"ng-template\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(5, \"\\n`\\n\");\n    }\n  },\n  dependencies: [i2.AdDirective],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["AdDirective","Chapter19Component","constructor","service","ads","currentAdIndex","getAds","ngOnInit","loadComponent","length","adItem","viewContainerRef","adHost","clear","componentRef","createComponent","component","instance","data","console","log","toString","interval","setInterval","clearTimer","clearInterval","ngOnDestroy","i0","ɵɵdirectiveInject","i1","AdService","selectors","viewQuery","Chapter19Component_Query","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵtemplate","Chapter19Component_ng_template_4_Template"],"sources":["/home/adilson/project/Angular/NotesForProfessional/src/app/chapter19/chapter19.component.ts","/home/adilson/project/Angular/NotesForProfessional/src/app/chapter19/chapter19.component.html"],"sourcesContent":["import { Component, Input, OnInit, ViewChild } from '@angular/core';\nimport { AdItem } from './model/AdItem';\nimport { AdDirective } from './ad.directive';\nimport { AdComponent } from './interfaces/AdComponent';\nimport { AdService } from './service/ad.service';\n\n@Component({\n  selector: 'app-chapter19',\n  templateUrl: './chapter19.component.html',\n  styleUrls: ['./chapter19.component.css']\n})\nexport class Chapter19Component implements OnInit {\n\n  ads: AdItem[] = [];\n\n  @ViewChild(AdDirective, { static: true }) adHost!: AdDirective;\n\n  private clearTimer: VoidFunction | undefined;\n\n  currentAdIndex = -1;\n\n  constructor(private service: AdService) {\n    this.ads = this.service.getAds();\n  }\n\n  ngOnInit(): void {\n    this.loadComponent();\n    this.getAds();\n  }\n\n\n  loadComponent() {\n\n   // this.currentAdIndex= this.currentAdIndex==0?1:0;\n    this.currentAdIndex = (this.currentAdIndex + 1) % this.ads.length;\n    const adItem = this.ads[this.currentAdIndex];\n    const viewContainerRef = this.adHost.viewContainerRef;\n    viewContainerRef.clear();\n    const componentRef = viewContainerRef.createComponent<AdComponent>(adItem.component);\n    componentRef.instance.data = adItem.data;\n    console.log(this.currentAdIndex + '  ' + adItem.component.toString())\n  }\n\n\n\n  getAds() {\n    const interval = setInterval(() => {\n      this.loadComponent();\n    }, 1000);\n    this.clearTimer = () => clearInterval(interval);\n  }\n\n  ngOnDestroy() {\n    this.clearTimer?.();\n  }\n\n}\n","\n<div class=\"ad-banner-example\">\n  <h3>Capitulo 19</h3>\n  <hr>\n  <ng-template adHost></ng-template>\n</div>\n`\n"],"mappings":"AAEA,SAASA,WAAW,QAAQ,gBAAgB;;;;;AAS5C,OAAM,MAAOC,kBAAkB;EAU7BC,YAAoBC,OAAkB;IAAlB,KAAAA,OAAO,GAAPA,OAAO;IAR3B,KAAAC,GAAG,GAAa,EAAE;IAMlB,KAAAC,cAAc,GAAG,CAAC,CAAC;IAGjB,IAAI,CAACD,GAAG,GAAG,IAAI,CAACD,OAAO,CAACG,MAAM,EAAE;EAClC;EAEAC,QAAQA,CAAA;IACN,IAAI,CAACC,aAAa,EAAE;IACpB,IAAI,CAACF,MAAM,EAAE;EACf;EAGAE,aAAaA,CAAA;IAEZ;IACC,IAAI,CAACH,cAAc,GAAG,CAAC,IAAI,CAACA,cAAc,GAAG,CAAC,IAAI,IAAI,CAACD,GAAG,CAACK,MAAM;IACjE,MAAMC,MAAM,GAAG,IAAI,CAACN,GAAG,CAAC,IAAI,CAACC,cAAc,CAAC;IAC5C,MAAMM,gBAAgB,GAAG,IAAI,CAACC,MAAM,CAACD,gBAAgB;IACrDA,gBAAgB,CAACE,KAAK,EAAE;IACxB,MAAMC,YAAY,GAAGH,gBAAgB,CAACI,eAAe,CAAcL,MAAM,CAACM,SAAS,CAAC;IACpFF,YAAY,CAACG,QAAQ,CAACC,IAAI,GAAGR,MAAM,CAACQ,IAAI;IACxCC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACf,cAAc,GAAG,IAAI,GAAGK,MAAM,CAACM,SAAS,CAACK,QAAQ,EAAE,CAAC;EACvE;EAIAf,MAAMA,CAAA;IACJ,MAAMgB,QAAQ,GAAGC,WAAW,CAAC,MAAK;MAChC,IAAI,CAACf,aAAa,EAAE;IACtB,CAAC,EAAE,IAAI,CAAC;IACR,IAAI,CAACgB,UAAU,GAAG,MAAMC,aAAa,CAACH,QAAQ,CAAC;EACjD;EAEAI,WAAWA,CAAA;IACT,IAAI,CAACF,UAAU,GAAE,CAAE;EACrB;;AA3CWvB,kBAAkB,C;mBAAlBA,kBAAkB,EAAA0B,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,SAAA;AAAA;AAAlB7B,kBAAkB,C;QAAlBA,kBAAkB;EAAA8B,SAAA;EAAAC,SAAA,WAAAC,yBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;qBAIlBlC,WAAW;;;;;;;;;;;;MCdxB2B,EAAA,CAAAS,cAAA,aAA+B;MACzBT,EAAA,CAAAU,MAAA,kBAAW;MAAAV,EAAA,CAAAW,YAAA,EAAK;MACpBX,EAAA,CAAAY,SAAA,SAAI;MACJZ,EAAA,CAAAa,UAAA,IAAAC,yCAAA,yBAAkC;MACpCd,EAAA,CAAAW,YAAA,EAAM;MACNX,EAAA,CAAAU,MAAA,YACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}